<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ClarityBrief — Onboarding complete</title>
  <style>
    :root{
      --bg:#0b1220;
      --panel:#0f1a2e;
      --panel2:#0c172b;
      --stroke:rgba(255,255,255,.10);
      --stroke2:rgba(255,255,255,.14);
      --text:#e8eefc;
      --muted:rgba(232,238,252,.72);
      --muted2:rgba(232,238,252,.58);
      --brand:#6ee7ff;
      --brand2:#a78bfa;
      --good:#34d399;
      --warn:#fbbf24;
      --bad:#fb7185;
      --shadow: 0 18px 50px rgba(0,0,0,.35);
      --radius: 16px;
      --radius2: 22px;
      --max: 1100px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:
        radial-gradient(1200px 700px at 20% 0%, rgba(110,231,255,.18), transparent 55%),
        radial-gradient(900px 700px at 90% 10%, rgba(167,139,250,.14), transparent 55%),
        radial-gradient(900px 700px at 50% 100%, rgba(52,211,153,.08), transparent 60%),
        linear-gradient(180deg, #070c16, #0b1220 55%, #070c16);
    }
    a{color:inherit; text-decoration:none}
    .wrap{max-width:var(--max); margin:0 auto; padding: 22px 18px 64px}

    /* Topbar */
    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      padding: 14px 14px;
      border: 1px solid var(--stroke);
      background: rgba(15,26,46,.55);
      backdrop-filter: blur(10px);
      border-radius: var(--radius2);
      box-shadow: 0 10px 30px rgba(0,0,0,.18);
    }
    .brand{
      display:flex; align-items:center; gap:10px; font-weight:750; letter-spacing:.2px;
    }
    .logo{
      width:34px; height:34px; border-radius: 12px;
      background: linear-gradient(135deg, rgba(110,231,255,.95), rgba(167,139,250,.9));
      box-shadow: 0 10px 25px rgba(110,231,255,.12);
      position:relative;
    }
    .logo:after{
      content:"";
      position:absolute; inset:9px;
      border-radius: 10px;
      background: rgba(11,18,32,.70);
      border: 1px solid rgba(255,255,255,.18);
    }
    .nav{
      display:flex; align-items:center; gap:10px;
      font-size: 14px;
      color: var(--muted);
      flex-wrap: wrap;
      justify-content: flex-end;
    }
    .pill{
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      font-size: 12px;
      color: var(--muted);
      white-space:nowrap;
    }
    .link{
      color: rgba(232,238,252,.85);
      text-decoration: underline;
      text-underline-offset: 2px;
      font-size: 13px;
    }

    /* Onboarding strip */
    .strip{
      margin-top: 14px;
      padding: 12px 14px;
      border-radius: var(--radius2);
      border: 1px solid var(--stroke);
      background: rgba(15,26,46,.42);
      backdrop-filter: blur(10px);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      flex-wrap: wrap;
    }
    .steps{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items:center;
      color: var(--muted);
      font-size: 13px;
    }
    .step{
      display:inline-flex; align-items:center; gap:8px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    .step .n{
      width:18px; height:18px; border-radius: 7px;
      display:flex; align-items:center; justify-content:center;
      font-family: var(--mono);
      font-size: 11px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      color: rgba(232,238,252,.85);
    }
    .step.active{
      border-color: rgba(110,231,255,.35);
      background: rgba(110,231,255,.08);
      color: rgba(232,238,252,.92);
    }
    .step.active .n{
      border-color: rgba(110,231,255,.45);
      background: rgba(110,231,255,.14);
    }
    .eta{
      color: var(--muted2);
      font-size: 13px;
    }

    /* Layout */
    .grid{
      margin-top: 16px;
      display:grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 14px;
      align-items:start;
    }
    @media (max-width: 980px){
      .grid{grid-template-columns: 1fr}
    }
    .panel{
      background: rgba(15,26,46,.55);
      border: 1px solid var(--stroke);
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      padding: 20px;
      backdrop-filter: blur(10px);
    }
    h1{
      margin: 0;
      font-size: 22px;
      letter-spacing: -0.3px;
    }
    .sub{
      margin-top: 8px;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.55;
      max-width: 78ch;
    }

    .heroRow{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 12px;
    }

    /* Cards */
    .card{
      margin-top: 12px;
      padding: 14px;
      border-radius: var(--radius2);
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    .sectionTitle{
      margin: 0;
      font-size: 13px;
      font-weight: 900;
      letter-spacing: .2px;
      text-transform: uppercase;
      color: rgba(232,238,252,.82);
    }

    /* Readiness summary */
    .summaryTop{
      margin-top: 10px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 620px){
      .summaryTop{grid-template-columns: 1fr}
    }

    .readiness{
      padding: 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      display:flex;
      gap: 10px;
      align-items:center;
    }
    .badge{
      width: 36px; height: 36px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: var(--mono);
      font-weight: 900;
      color: rgba(232,238,252,.88);
      flex: 0 0 auto;
    }
    .badge.good{border-color: rgba(52,211,153,.45); background: rgba(52,211,153,.12)}
    .badge.fair{border-color: rgba(251,191,36,.40); background: rgba(251,191,36,.10)}
    .badge.poor{border-color: rgba(251,113,133,.40); background: rgba(251,113,133,.10)}
    .k{font-size: 12px; color: var(--muted2)}
    .v{font-size: 14px; font-weight: 950}

    .meter{
      padding: 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    .meterTop{
      display:flex;
      justify-content:space-between;
      align-items:baseline;
      gap: 10px;
    }
    .meterLabel{font-weight: 900; font-size: 13px}
    .meterVal{font-family: var(--mono); font-size: 12px; color: rgba(232,238,252,.86)}
    .bar{
      margin-top: 10px;
      height: 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      overflow:hidden;
    }
    .bar > i{
      display:block;
      height:100%;
      width: 0%;
      background: linear-gradient(90deg, rgba(110,231,255,.85), rgba(167,139,250,.75));
      transition: width .4s ease;
    }
    .meterHint{
      margin-top: 8px;
      color: var(--muted2);
      font-size: 12px;
      line-height: 1.45;
    }

    /* Completeness */
    .compRow{
      margin-top: 10px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      flex-wrap: wrap;
    }
    .compPill{
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      font-size: 12px;
      color: var(--muted);
      font-family: var(--mono);
      white-space:nowrap;
    }

    /* Next actions */
    .actions{
      margin-top: 10px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }
    .actionCard{
      padding: 14px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(700px 300px at 15% 0%, rgba(110,231,255,.10), transparent 60%),
        radial-gradient(700px 350px at 90% 10%, rgba(167,139,250,.10), transparent 60%),
        rgba(255,255,255,.02);
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
    }
    .actionCard:hover{
      border-color: rgba(255,255,255,.16);
      background: rgba(255,255,255,.03);
      transform: translateY(-1px);
      transition: .15s ease;
    }
    .actionTitle{
      font-weight: 950;
      font-size: 14px;
      color: rgba(232,238,252,.92);
    }
    .actionDesc{
      margin-top: 4px;
      color: var(--muted);
      font-size: 13px;
      line-height: 1.5;
      max-width: 70ch;
    }
    .cta{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      font-weight: 900;
      white-space: nowrap;
    }

    /* Decision brief preview */
    .preview{
      margin-top: 10px;
      padding: 14px;
      border-radius: var(--radius2);
      border: 1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(900px 380px at 15% 0%, rgba(110,231,255,.12), transparent 55%),
        radial-gradient(700px 420px at 90% 10%, rgba(167,139,250,.12), transparent 55%),
        rgba(12,23,43,.62);
    }
    .previewTop{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap: 12px;
      flex-wrap: wrap;
    }
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding: 6px 9px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.03);
      color: var(--muted);
      font-size: 12px;
      white-space: nowrap;
      font-family: var(--mono);
    }
    .miniRow{
      margin-top: 10px;
      display:grid;
      gap: 10px;
    }
    .mini{
      padding: 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
    }
    .miniLabel{
      font-size: 12px;
      font-weight: 900;
      color: rgba(232,238,252,.86);
    }
    .miniText{
      margin-top: 4px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.5;
    }

    .note{
      margin-top: 12px;
      padding: 12px;
      border-radius: 16px;
      border: 1px dashed rgba(255,255,255,.18);
      background: rgba(255,255,255,.02);
      color: var(--muted);
      font-size: 13px;
      line-height: 1.55;
    }

    .footer{
      margin-top: 22px;
      padding-top: 14px;
      border-top: 1px solid rgba(255,255,255,.10);
      display:flex;
      gap: 10px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap: wrap;
      color: var(--muted2);
      font-size: 13px;
    }
    .footer a{color: var(--muted); text-decoration: underline; text-underline-offset: 2px}
  </style>
</head>

<body>
  <div class="wrap">
    <!-- Top Bar -->
    <header class="topbar">
      <div class="brand" aria-label="Product">
        <a href="01_landing.html" style="display:flex;align-items:center;gap:10px;">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <div style="display:flex;align-items:baseline;gap:8px;">
              <div style="font-size:15px;">ClarityBrief</div>
              <div style="font-size:12px;color:var(--muted);font-weight:650;">Onboarding complete</div>
            </div>
          </div>
        </a>
      </div>

      <nav class="nav" aria-label="Top navigation">
        <span class="pill" id="trialPill">Trial: Day 1 of 7</span>
        <a class="link" href="07_done.html">Home</a>
        <a class="link" href="09_job_intake.html">Analyze a job</a>
        <a class="link" href="08_preferences.html">Preferences</a>
        <a class="link" href="12_saved_briefs.html">Saved briefs</a>
        <a class="link" href="13_trends.html">Trends</a>
      </nav>
    </header>

    <!-- Onboarding strip -->
    <div class="strip" aria-label="Onboarding progress">
      <div class="steps">
        <span class="step"><span class="n">1</span>Account</span>
        <span class="step"><span class="n">2</span>Resume</span>
        <span class="step"><span class="n">3</span>Results</span>
        <span class="step"><span class="n">4</span>Confirm</span>
        <span class="step active"><span class="n">5</span>Done</span>
      </div>
      <div class="eta">You now have a baseline profile for decision-support.</div>
    </div>

    <div class="grid" aria-label="Done layout">
      <!-- Left: first value moment -->
      <main class="panel" aria-label="First value moment">
        <div class="heroRow">
          <div>
            <h1>Profile created — ready to make better decisions</h1>
            <p class="sub">
              You’ve established a <b>structured baseline</b>. From here, ClarityBrief can evaluate jobs with explicit uncertainty,
              evidence-backed fit, and clear gaps — without encouraging embellishment.
            </p>
          </div>
          <div class="pill" id="lastUpdatedPill">Last updated: —</div>
        </div>

        <div class="card" aria-label="Profile readiness summary">
          <div class="sectionTitle">Profile readiness summary</div>

          <div class="summaryTop">
            <div class="readiness" aria-label="Readiness label">
              <div class="badge" id="readinessBadge">R</div>
              <div>
                <div class="k">Readiness label</div>
                <div class="v" id="readinessLabel">—</div>
                <div class="k" id="generatedAt">—</div>
              </div>
            </div>

            <div class="meter" aria-label="Profile completeness">
              <div class="meterTop">
                <div class="meterLabel">Profile completeness</div>
                <div class="meterVal"><span id="compVal">—</span>%</div>
              </div>
              <div class="bar"><i id="compBar"></i></div>
              <div class="meterHint">
                Derived from whether you confirmed key fields. More completeness → less fragile assumptions later.
              </div>
            </div>
          </div>

          <div class="summaryTop" style="margin-top:10px;">
            <div class="meter" aria-label="Structure score">
              <div class="meterTop">
                <div class="meterLabel">Structure</div>
                <div class="meterVal"><span id="structureVal">—</span>/100</div>
              </div>
              <div class="bar"><i id="structureBar"></i></div>
              <div class="meterHint">Roles + dates clarity. Missing timelines reduce confidence.</div>
            </div>

            <div class="meter" aria-label="Evidence strength score">
              <div class="meterTop">
                <div class="meterLabel">Evidence strength</div>
                <div class="meterVal"><span id="evidenceVal">—</span>/100</div>
              </div>
              <div class="bar"><i id="evidenceBar"></i></div>
              <div class="meterHint">Outcomes + specificity. “Did X” beats “responsible for Y”.</div>
            </div>
          </div>
        </div>

        <div class="card" aria-label="What you can do next">
          <div class="sectionTitle">What you can do next</div>
          <div class="actions" style="margin-top:12px;">
            <a class="actionCard" href="03_resume_intake.html" aria-label="Improve resume clarity">
              <div>
                <div class="actionTitle">Improve resume clarity</div>
                <div class="actionDesc">
                  Strengthen structure and evidence. Add dates, clarify scope, convert a few bullets to outcomes.
                </div>
              </div>
              <span class="cta">Open <span aria-hidden="true">→</span></span>
            </a>

            <a class="actionCard" href="08_preferences.html" aria-label="Set job preferences">
              <div>
                <div class="actionTitle">Set job preferences</div>
                <div class="actionDesc">
                  Capture constraints that aren’t in your resume (location, salary, visa, deal-breakers). This improves decision quality.
                </div>
              </div>
              <span class="cta">Open <span aria-hidden="true">→</span></span>
            </a>

            <a class="actionCard" href="09_job_intake.html" aria-label="Analyze a job (trial)">
              <div>
                <div class="actionTitle">Analyze a job (trial)</div>
                <div class="actionDesc">
                  Paste a job description and get a Decision Brief preview (fit, gaps, uncertainty, suggested strategy).
                </div>
              </div>
              <span class="cta">Open <span aria-hidden="true">→</span></span>
            </a>
          </div>

          <div class="note">
            <b>Boundary reminder:</b> ClarityBrief does not help fabricate experience. Uncertainty stays explicit, and employers remain the final verifier.
          </div>
        </div>
      </main>

      <!-- Right: decision brief preview -->
      <aside class="panel" aria-label="Decision brief preview">
        <div class="preview">
          <div class="previewTop">
            <div>
              <div class="sectionTitle">Decision Brief preview</div>
              <div style="margin-top:8px; font-weight:950; font-size:14px;">“Should I apply?” — how it will look</div>
              <div style="margin-top:6px; color:var(--muted); font-size:13px; line-height:1.55;">
                When you paste a job description, the system generates a brief with evidence-backed fit and explicit unknowns.
              </div>
            </div>
            <span class="chip">preview • not analysis</span>
          </div>

          <div class="miniRow">
            <div class="mini">
              <div class="miniLabel">Fit snapshot</div>
              <div class="miniText">
                Fit: <b>Consider</b> • Confidence: <b>Medium</b><br />
                Why: Strong core skills, uncertain seniority alignment.
              </div>
            </div>

            <div class="mini">
              <div class="miniLabel">Top gaps (actionable)</div>
              <div class="miniText">
                1) Missing evidence of ownership at scale<br/>
                2) No explicit Next.js experience (if required)<br/>
                3) Timeline ambiguity reduces seniority confidence
              </div>
            </div>

            <div class="mini">
              <div class="miniLabel">Uncertainty (kept visible)</div>
              <div class="miniText">
                “Led architecture” claim lacks scope details → confidence reduced until confirmed.
              </div>
            </div>

            <div class="mini">
              <div class="miniLabel">Suggested strategy</div>
              <div class="miniText">
                Outreach: Hiring manager + targeted evidence bullets (not generic optimization).
              </div>
            </div>
          </div>
        </div>

        <div class="card" aria-label="Trial status">
          <div class="sectionTitle">Trial status</div>
          <div class="compRow">
            <div style="color:var(--muted); font-size:13px; line-height:1.55;">
              You’re in your 7-day trial. Focus on: resume clarity → preferences → first job Decision Brief.
            </div>
            <div class="compPill" id="trialMeta">—</div>
          </div>
        </div>

        <div class="card" aria-label="Quick links">
          <div class="sectionTitle">Quick links</div>
          <div style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;">
            <a class="pill" href="05_results.html">Resume results</a>
            <a class="pill" href="06_confirm.html">Confirm profile</a>
            <a class="pill" href="03_resume_intake.html">Edit resume</a>
          </div>
        </div>
      </aside>
    </div>

    <footer class="footer" aria-label="Footer">
      <div>
        <div style="font-weight:850; color: rgba(232,238,252,.80);">ClarityBrief</div>
        <div style="margin-top:4px;">Decision support that makes assumptions visible.</div>
      </div>
      <div style="display:flex; gap: 14px; flex-wrap:wrap;">
        <a href="#" onclick="alert('Placeholder: privacy policy'); return false;">Privacy</a>
        <a href="#" onclick="alert('Placeholder: terms'); return false;">Terms</a>
      </div>
    </footer>
  </div>

  <script>
    function getUser(){
      try { return JSON.parse(localStorage.getItem('cb_mock_user') || 'null'); }
      catch { return null; }
    }
    function computeTrialDay(user){
      if(!user?.trialStartISO) return 1;
      const start = new Date(user.trialStartISO);
      const now = new Date();
      const diffDays = Math.max(0, Math.floor((now - start) / (1000*60*60*24)));
      return Math.min((user.trialDays || 7), diffDays + 1);
    }
    function updateTrialPill(){
      const user = getUser();
      const day = computeTrialDay(user);
      const total = user?.trialDays || 7;
      document.getElementById('trialPill').textContent = `Trial: Day ${day} of ${total}`;
      document.getElementById('trialMeta').textContent = `day ${day}/${total}`;
    }

    function setBar(barId, valId, value){
      const v = Math.max(0, Math.min(100, Number(value || 0)));
      document.getElementById(valId).textContent = String(v);
      document.getElementById(barId).style.width = v + '%';
    }

    function setReadiness(label){
      const el = document.getElementById('readinessLabel');
      const badge = document.getElementById('readinessBadge');
      el.textContent = label || '—';
      const l = String(label || '').toLowerCase();

      badge.className = 'badge';
      if(l.includes('strong')){
        badge.classList.add('good'); badge.textContent = '✓';
      } else if(l.includes('fair')){
        badge.classList.add('fair'); badge.textContent = '≈';
      } else {
        badge.classList.add('poor'); badge.textContent = '!';
      }
    }

    function getResults(){
      const fallback = {
        generatedAtISO: new Date().toISOString(),
        scores: { structure: 68, evidence_strength: 61, readiness_label: "Fair" }
      };
      try{
        const raw = localStorage.getItem('cb_mock_resume_results');
        if(raw) return JSON.parse(raw);
      } catch(_) {}
      return fallback;
    }

    function computeCompleteness(){
      // Simple: if confirmed profile exists, 90; if not, 55.
      // You can refine later (e.g., count missing fields).
      try{
        const raw = localStorage.getItem('cb_mock_profile_confirmed');
        if(raw){
          const p = JSON.parse(raw);
          const hasCore = !!(p?.current?.title && p?.current?.company && p?.current?.start);
          const hasRoles = Array.isArray(p?.roles) && p.roles.length > 0;
          if(hasCore && hasRoles) return 92;
          if(hasCore) return 78;
          return 65;
        }
      } catch(_) {}
      return 55;
    }

    function updateLastUpdated(results){
      const ts = results?.generatedAtISO ? new Date(results.generatedAtISO) : new Date();
      document.getElementById('generatedAt').textContent = `Resume analysis: ${ts.toLocaleString()}`;
      document.getElementById('lastUpdatedPill').textContent = `Last updated: ${ts.toLocaleDateString()} • ${ts.toLocaleTimeString()}`;
    }

    function init(){
      updateTrialPill();

      const results = getResults();
      setReadiness(results?.scores?.readiness_label);

      setBar('structureBar','structureVal', results?.scores?.structure);
      setBar('evidenceBar','evidenceVal', results?.scores?.evidence_strength);

      const comp = computeCompleteness();
      setBar('compBar','compVal', comp);

      updateLastUpdated(results);
    }

    init();
  </script>
</body>
</html>
